{"ast":null,"code":"import axios from 'axios';\nimport toast from 'react-hot-toast';\nconst BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nclass ApiService {\n  constructor() {\n    this.client = axios.create({\n      baseURL: BASE_URL,\n      timeout: 30000,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n    // Request interceptor\n    this.client.interceptors.request.use(config => {\n      return config;\n    }, error => {\n      return Promise.reject(error);\n    });\n\n    // Response interceptor\n    this.client.interceptors.response.use(response => {\n      return response;\n    }, error => {\n      var _error$response, _error$response2, _error$response3;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        // Token expired or invalid\n        localStorage.removeItem('token');\n        this.setAuthToken(null);\n        window.location.href = '/login';\n      } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 403) {\n        toast.error('Access denied');\n      } else if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) >= 500) {\n        toast.error('Server error. Please try again.');\n      }\n      return Promise.reject(error);\n    });\n  }\n  setAuthToken(token) {\n    if (token) {\n      this.client.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    } else {\n      delete this.client.defaults.headers.common['Authorization'];\n    }\n  }\n\n  // Generic HTTP methods\n  async get(url, config = {}) {\n    return this.client.get(url, config);\n  }\n  async post(url, data = {}, config = {}) {\n    return this.client.post(url, data, config);\n  }\n  async put(url, data = {}, config = {}) {\n    return this.client.put(url, data, config);\n  }\n  async delete(url, config = {}) {\n    return this.client.delete(url, config);\n  }\n\n  // Puja-specific API methods\n  async generateFocusSuggestion(data) {\n    return this.post('/puja/focus-suggestion', data);\n  }\n  async generateMonthlyPanchang(data) {\n    return this.post('/puja/panchang/monthly', data);\n  }\n  async generatePropositions(data) {\n    return this.post('/puja/propositions/generate', data);\n  }\n  async generateExperimentalPujas(data) {\n    return this.post('/puja/propositions/experimental', data);\n  }\n  async getHistoricalPropositions(params = {}) {\n    return this.get('/puja/propositions/history', {\n      params\n    });\n  }\n  async exportToSheets(data) {\n    return this.post('/puja/export/sheets', data);\n  }\n  async getTeamFeedback(spreadsheetId) {\n    return this.get(`/puja/feedback/sheets/${spreadsheetId}`);\n  }\n  async uploadPDFs(formData) {\n    return this.post('/puja/pdfs/upload', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  }\n  async listPDFs() {\n    return this.get('/puja/pdfs/list');\n  }\n\n  // Feedback API methods\n  async submitFeedback(data) {\n    return this.post('/feedback/submit', data);\n  }\n  async getFeedbackHistory(params = {}) {\n    return this.get('/feedback/history', {\n      params\n    });\n  }\n  async analyzePerformance(data) {\n    return this.post('/feedback/analyze/performance', data);\n  }\n  async synthesizeFeedback(data) {\n    return this.post('/feedback/synthesize', data);\n  }\n  async exportFeedbackToSheets(data) {\n    return this.post('/feedback/export/sheets', data);\n  }\n}\nexport const api = new ApiService();","map":{"version":3,"names":["axios","toast","BASE_URL","process","env","REACT_APP_API_URL","ApiService","constructor","client","create","baseURL","timeout","headers","interceptors","request","use","config","error","Promise","reject","response","_error$response","_error$response2","_error$response3","status","localStorage","removeItem","setAuthToken","window","location","href","token","defaults","common","get","url","post","data","put","delete","generateFocusSuggestion","generateMonthlyPanchang","generatePropositions","generateExperimentalPujas","getHistoricalPropositions","params","exportToSheets","getTeamFeedback","spreadsheetId","uploadPDFs","formData","listPDFs","submitFeedback","getFeedbackHistory","analyzePerformance","synthesizeFeedback","exportFeedbackToSheets","api"],"sources":["/Users/souravdey/Projects/panchang/panchang-fe/src/services/api.js"],"sourcesContent":["import axios from 'axios';\nimport toast from 'react-hot-toast';\n\nconst BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nclass ApiService {\n  constructor() {\n    this.client = axios.create({\n      baseURL: BASE_URL,\n      timeout: 30000,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    // Request interceptor\n    this.client.interceptors.request.use(\n      (config) => {\n        return config;\n      },\n      (error) => {\n        return Promise.reject(error);\n      }\n    );\n\n    // Response interceptor\n    this.client.interceptors.response.use(\n      (response) => {\n        return response;\n      },\n      (error) => {\n        if (error.response?.status === 401) {\n          // Token expired or invalid\n          localStorage.removeItem('token');\n          this.setAuthToken(null);\n          window.location.href = '/login';\n        } else if (error.response?.status === 403) {\n          toast.error('Access denied');\n        } else if (error.response?.status >= 500) {\n          toast.error('Server error. Please try again.');\n        }\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  setAuthToken(token) {\n    if (token) {\n      this.client.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    } else {\n      delete this.client.defaults.headers.common['Authorization'];\n    }\n  }\n\n  // Generic HTTP methods\n  async get(url, config = {}) {\n    return this.client.get(url, config);\n  }\n\n  async post(url, data = {}, config = {}) {\n    return this.client.post(url, data, config);\n  }\n\n  async put(url, data = {}, config = {}) {\n    return this.client.put(url, data, config);\n  }\n\n  async delete(url, config = {}) {\n    return this.client.delete(url, config);\n  }\n\n  // Puja-specific API methods\n  async generateFocusSuggestion(data) {\n    return this.post('/puja/focus-suggestion', data);\n  }\n\n  async generateMonthlyPanchang(data) {\n    return this.post('/puja/panchang/monthly', data);\n  }\n\n  async generatePropositions(data) {\n    return this.post('/puja/propositions/generate', data);\n  }\n\n  async generateExperimentalPujas(data) {\n    return this.post('/puja/propositions/experimental', data);\n  }\n\n  async getHistoricalPropositions(params = {}) {\n    return this.get('/puja/propositions/history', { params });\n  }\n\n  async exportToSheets(data) {\n    return this.post('/puja/export/sheets', data);\n  }\n\n  async getTeamFeedback(spreadsheetId) {\n    return this.get(`/puja/feedback/sheets/${spreadsheetId}`);\n  }\n\n  async uploadPDFs(formData) {\n    return this.post('/puja/pdfs/upload', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n  }\n\n  async listPDFs() {\n    return this.get('/puja/pdfs/list');\n  }\n\n  // Feedback API methods\n  async submitFeedback(data) {\n    return this.post('/feedback/submit', data);\n  }\n\n  async getFeedbackHistory(params = {}) {\n    return this.get('/feedback/history', { params });\n  }\n\n  async analyzePerformance(data) {\n    return this.post('/feedback/analyze/performance', data);\n  }\n\n  async synthesizeFeedback(data) {\n    return this.post('/feedback/synthesize', data);\n  }\n\n  async exportFeedbackToSheets(data) {\n    return this.post('/feedback/export/sheets', data);\n  }\n}\n\nexport const api = new ApiService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}